<div class="container mx-auto p-4">
  <h1 class="text-3xl font-bold mb-4">Matrix LED GIF Player</h1>

  <!-- Current Playing -->
  <div *ngIf="currentGif" class="mb-6 border p-4 rounded-lg bg-gray-100 text-center">
    <img [src]="gifService.getGifUrl(currentGif.file)" alt="Current GIF" class="mx-auto w-[192px] h-[192px] object-contain">
  </div>

  <!-- Settings -->
  <button (click)="toggleSettings()" class="mb-4 px-4 py-2 bg-blue-500 text-white rounded">⚙️ Configuración</button>
  <div *ngIf="showSettings" class="mb-6 p-4 border rounded bg-gray-50">
    <input [(ngModel)]="wledIp" placeholder="IP de WLED" class="border p-2 mr-2">
    <button (click)="saveWledIp()" class="bg-green-500 text-white px-4 py-2 rounded">Guardar</button>
  </div>

  <!-- Favorites -->
  <div *ngIf="favorites.length > 0" class="mb-6">
    <h2 class="text-xl font-semibold mb-2">Favoritos</h2>
    <div class="grid grid-cols-6 gap-4">
      <div *ngFor="let gif of favorites" class="relative group">
        <img [src]="gifService.getGifUrl(gif.file)" class="w-[96px] h-[96px] object-contain cursor-pointer" (click)="playGif(gif)">
        <div class="absolute top-2 right-2 text-red-500"><fa-icon [icon]="['fas', 'heart']"></fa-icon></div>
      </div>
    </div>
  </div>

  <!-- Grid -->
  <div class="mb-6">
    <h2 class="text-xl font-semibold mb-2">GIFs Disponibles</h2>
    <div class="grid grid-cols-6 gap-4">
      <div *ngFor="let gif of gifs.filter(g => !hidden.some(h => h.file === g.file))" class="relative group">
        <img [src]="gifService.getGifUrl(gif.file)" class="w-[96px] h-[96px] object-contain cursor-pointer" (click)="playGif(gif)">
        <div class="absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-2">
          <button (click)="playGif(gif)" title="Reproducir"><fa-icon [icon]="['fas', 'play']"></fa-icon></button>
          <button (click)="toggleFavorite(gif)" title="Favorito">
            <fa-icon [icon]="favorites.some(f => f.file === gif.file) ? ['fas', 'heart'] : ['far', 'heart']"></fa-icon>
          </button>
          <button (click)="hideGif(gif)" title="Ocultar"><fa-icon [icon]="['fas', 'eye-slash']"></fa-icon></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Hidden -->
  <button (click)="showHidden = !showHidden" class="mb-2 text-blue-500">▶ {{ showHidden ? 'Ocultar' : 'Mostrar' }} Ocultados</button>
  <div *ngIf="showHidden" class="grid grid-cols-6 gap-4">
    <div *ngFor="let gif of hidden" class="relative group">
      <img [src]="gifService.getGifUrl(gif.file)" class="w-[96px] h-[96px] object-contain">
    </div>
  </div>
</div>
